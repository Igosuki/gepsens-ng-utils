angular.module("gepsens",["gepsens.tpls","gepsens.auth","gepsens.badges"]),angular.module("gepsens.tpls",["template/badges/badges.html"]),angular.module("gepsens.auth",["ngCookies","ngResource"]).provider("Auth",function(){this.$get=function(a,b,c){b("auth/:provider",{},{authenticate:{method:"GET"}});var d=b("users/:id"),e=c.get("user")||{},f=function(a,b){self.currentUser=a,self.currentUser.isLoggedIn=!0,c.put("user",self.currentUser),c.remove("user"),b&&b(self.currentUser)};return{currentUser:e,setCurrentUser:function(a){e=a},logout:function(){a.get("/logout")},login:function(b,c,d){return a.post("/login",{username:b,password:c}).success(function(a){f(a,d)})},loginOauth:function(b,c){return""===b.trim()?a.get("auth",{withCredentials:!0}).success(function(a){f(a,c)}):(window.location.href="auth/"+b,void 0)},users:function(){return d.query()}}}}),angular.module("gepsens.badges",[]).directive("badges",function(){return{scope:{badgeList:"=",badgeClass:"@",badgeControl:"@",simple:"="},templateUrl:"template/badges/badges.html",restrict:"E",controller:function(a){a.remove=function(b){a.badgeList.splice(b,1)}},link:function(a){a.$watch("badgeList",function(b,c){a.$parent.form&&(!b||!c||b&&b.length>0?a.$parent.form.$setValidity(a.badgeControl,!0):a.$parent.form.$setValidity(a.badgeControl,!1))},!0)}}}),angular.module("template/badges/badges.html",[]).run(["$templateCache",function(a){a.put("template/badges/badges.html",'<span class="tag" data-ng-repeat="badge in badgeList">\n  <span>{{badge}}</span>\n  <a class="tagsinput-remove-link" ng-show="!simple" ng-click="remove($index)"> <i class="icon-remove" ></i></a>\n</span>')}]);