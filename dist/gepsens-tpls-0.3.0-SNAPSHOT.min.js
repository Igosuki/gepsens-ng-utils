angular.module("gepsens",["gepsens.tpls","gepsens.auth","gepsens.autogrow","gepsens.badges","gepsens.checkbox","gepsens.feedback","gepsens.paginate","gepsens.tracker"]),angular.module("gepsens.tpls",["template/badges/badges.html"]),angular.module("gepsens.auth",["ngCookies","ngResource"]).provider("Auth",function(){this.$get=function(a,b){b("auth/:provider",{},{authenticate:{method:"GET"}});var c=b("users/:id"),d=function(a,b){return e.currentUser=a,e.currentUser.isLoggedIn=!0,b&&b(e.currentUser),e.currentUser},e={isAuthenticated:function(){return!!e.currentUser},currentUser:null,setCurrentUser:function(a){e.currentUser=a},requestCurrentUser:function(a){return e.isAuthenticated()?e.currentUser:e.authenticate(a)},authenticate:function(b){return a.get("auth",{withCredentials:!0}).success(function(a){return d(a,b)})},logout:function(){a.get("/logout")},login:function(b,c,e){return a.post("/login",{username:b,password:c}).success(function(a){return d(a,e)})},loginOauth:function(a,b){return""===a.trim()?e.authenticate(b):(window.location.href="auth/"+a+"?callback="+window.location.href,void 0)},users:function(){return c.query()}};return e}}),angular.module("gepsens.autogrow",[]).directive("autogrow",function(){return function(a,b){var c=b[0].offsetWidth;b.css("padding-left"),b.css("padding-right");var d=angular.element("<div></div>").css({"font-size":b.css("font-size"),"font-family":b.css("font-family"),height:b.css("height"),"padding-left":b.css("padding-left"),"padding-right":b.css("padding-right"),"padding-bottom":b.css("padding-bottom"),"padding-top":b.css("padding-top"),border:b.css("border"),position:"absolute",top:"-10000px",left:"-10000px","white-space":"pre-wrap","word-wrap":"break-word","box-sizing":b.css("box-sizing"),"-moz-box-sizing":b.css("-moz-box-sizing"),"-webkit-box-sizing":b.css("-webkit-box-sizing"),"line-height":b.css("line-height")});angular.element(document.body).append(d);var e=function(){var a=function(a,b){for(var c=0,d="";b>c;c++)d+=a;return d},e=b.val().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/\s{2,}/g,function(b){return a("&nbsp;",b.length-1)+" "});d.html(e),d.css("height",b.css("height")),b.css("width",Math.max(d[0].offsetWidth+10,c)+"px"),b.css("overflow","hidden")};b.bind("keyup keydown keypress change",e),e()}}),angular.module("gepsens.badges",[]).directive("badges",function(){return{scope:{badgeList:"=",badgeClass:"@",badgeControl:"@",simple:"="},templateUrl:"template/badges/badges.html",restrict:"E",controller:function(a){a.remove=function(b){a.badgeList.splice(b,1)}},link:function(a,b){a.$watch("badgeList",function(b,c){a.$parent.form&&(!b||!c||b&&b.length>0?a.$parent.form.$setValidity(a.badgeControl,!0):a.$parent.form.$setValidity(a.badgeControl,!1))},!0),a.focusInput=function(){b.find("input").focus()},a.validateAndPush=function(a,b){b&&""!==b&&a&&a.indexOf(b)<0&&a.push(b)}}}}).directive("list-feed",function(){return{restrict:"A",scope:{listFeed:"="},link:function(){}}}),angular.module("gepsens.checkbox",[]).directive("flatCheckbox",[function(){return{scope:{value:"="},template:'<span class="checkbox" ng-class="{true: \'checked\'}[value]"><span class="icons" ng-click="value = !value"><span class="icon-unchecked first-icon"></span><span class="icon-check second-icon"></span></span><input type="checkbox" data-toggle="checkbox" ng-model="value" /><span style="width: 100%;" ng-transclude></span></span>',replace:!0,transclude:!0,restrict:"E",link:function(a){void 0===a.value&&(a.value=!1)}}}]),angular.module("gepsens.feedback",[]).directive("btnFeedback",["promiseTracker",function(a){return{scope:{btnFeedback:"=",tracker:"@"},template:"<button ng-transclude ng-class=\"{'error': 'btn-danger icon-meh', 'done': 'btn-success icon-ok', 'doing': 'icon-spinner icon-spin'}[btnFeedback]\"></button>",replace:!0,transclude:!0,restrict:"A",link:function(b){b.tracker&&a(b.tracker).on("start",function(){btnFeedback="doing"}).on("done",function(){btnFeedback="done"}).on("error",function(){btnFeedback="error"})}}}]),angular.module("gepsens.paginate",[]).filter("paginate",["$filter",function(a){return function(b,c,d){return b?a("limitTo")(b.slice(c*d),d):void 0}}]),angular.module("gepsens.tracker",[]).factory("httpRequestTracker",["$http",function(a){var b={};return b.hasPendingRequests=function(){return a.pendingRequests.length>0},b}]),angular.module("template/badges/badges.html",[]).run(["$templateCache",function(a){a.put("template/badges/badges.html",'<div class="tagsinput tagsinput-primary fitcontent form-control">\n	<span class="tag" data-ng-repeat="badge in badgeList">\n	  <span>{{badge}}</span>\n	  <a class="tagsinput-remove-link" ng-show="!simple" ng-click="remove($index)"> <i class="icon-remove" ></i></a>\n	</span>\n	<div class="tagsinput-add-container">\n		<div class="tagsinput-add" ng-click="focusInput()">\n			<i class="icon-plus"></i>\n		</div>\n		<input class="input-sm" type=\'text\' autogrow name="badgeListCmpl" ng-model="badgeListCmpl" ui-keydown="{\'enter\': \'validateAndPush(badgeList,badgeListCmpl)\'}" />\n	</div>\n</div>')}]);